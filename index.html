<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <style>
        #left {
            width: 150px;
            float: left;
            min-height: 300px;
            background-color: red;
        }

        #data {
            width: 100%;
            background-color: #aaa;
            min-height: 300px;
        }

        p {
            margin: 10px;
        }

    </style>

    <script type="text/javascript" defer>

        //συνάρτηση αρχικοποίησης AJAX υποδομής - επιστρέφει reference στο AJAX
        //object ή false αν δεν υποστηρίζονται AJAX κλήσεις από τον browser.
        function initAJAX() {
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                return new XMLHttpRequest();
            }
            else if (window.ActiveXObject) {
                // code for IE6, IE5 - εδώ χρησιμοποιούνται ActiveX object (MS τεχνολογίες)
                return new ActiveXObject("Microsoft.XMLHTTP");
            } else {
                alert("Your browser does not support XMLHTTP!");
                return false;
            }
        }


        function getXMLData() {

            //εκκίνηση AJAX υποδομής
            var xmlhttp = initAJAX();

            //Εφόσον υποστηρίζονται AJAX κλίεις:
            if (xmlhttp) {
                // κλήση σε API για λήψη δεδομένων (ΕΔΩ κλήση σε στατικό JSON αρχείο)
                xmlhttp.open("GET", "fuel.xml", true);
                xmlhttp.send(null);

                //ορισμός callback για τον χειρισμό της απάντησης
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                        var xml = xmlhttp.responseXML;

                        var stations = xml.getElementsByTagName("station");
                        document.getElementById("data").innerHTML = "";
                        for (i = 0; i < stations.length; i++) {
                            div = document.getElementById("data");
                            var station = stations[i];

                            var address = station.getElementsByTagName("address");

                            var phone = station.getElementsByTagName("phone");

                            var distance = station.getAttribute("distance");
                            
                            var stationId = station.getAttribute("stationID");

                            //var fuels = station.getElementsByTagName("fuels")[0];
                            var fuels = station.getElementsByTagName("fuels");

                            for(j = 0; j <= fuels.length; j++){
                                var fuel = station.getElementsByTagName("fuel")[j];
                                var fuelTypeID = fuel.getAttribute('fuelTypeID');
                                var price = fuel.getAttribute('price');
                                var priceTimeStamp = fuel.getAttribute('priceTimeStamp');
                                var valueFuel = fuel.childNodes[0];

                                node = document.createTextNode(address[0].childNodes[0].data);
                                paragraph1 = document.createElement("p");
                                paragraph1.insertAdjacentText('beforeend', 'Address: ')
                                paragraph1.appendChild(node);
                                div.appendChild(paragraph1);

                                node = document.createTextNode(fuelTypeID);
                                paragraph2 = document.createElement("p");
                                paragraph2.insertAdjacentText('beforeend', 'Fuel Type: ')
                                paragraph2.appendChild(node);
                                div.appendChild(paragraph2);

                                node = document.createTextNode(price);
                                paragraph3 = document.createElement("p");
                                paragraph3.insertAdjacentText('beforeend', 'price: ')
                                paragraph3.appendChild(node);
                                div.appendChild(paragraph3);

                                node = document.createTextNode(priceTimeStamp);
                                paragraph4 = document.createElement("p");
                                paragraph4.insertAdjacentText('beforeend', 'Time: ')
                                paragraph4.appendChild(node);
                                div.appendChild(paragraph4);

                                node = document.createTextNode(valueFuel.nodeValue);
                                paragraph5 = document.createElement("p");
                                paragraph5.appendChild(node);
                                div.appendChild(paragraph5);

                            }

                        }  
                    }   
                } 
            }  
        }  

    </script>
</head>

<body>
    <div id="left">
        <button onclick="getXMLData();" type="button">XML</button>
    </div>
    <div id="data"></div>
</body>

</html>